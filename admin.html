<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Login - Adhira Trust</title>

<link rel="stylesheet" href="css/style.css">

<style>
.login-container{
    max-width:400px;
    margin:80px auto;
    background:#fff;
    padding:30px;
    border-radius:10px;
    box-shadow:0 5px 20px rgba(0,0,0,0.2);
}
.login-container h2{
    text-align:center;
    color:#5a189a;
}
.login-container input{
    width:100%;
    padding:12px;
    margin:10px 0;
    border-radius:6px;
    border:1px solid #ccc;
}
.login-container button{
    width:100%;
    padding:12px;
    background:#7b2cbf;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
}
</style>
</head>

<body>

<div id="navbar-placeholder"></div>

<div class="login-container">
    <h2>Admin Login</h2>

    <input type="text" id="username" placeholder="User ID">
    <input type="password" id="password" placeholder="Password">
    <button onclick="login()">Login</button>

    <p id="errorMsg" style="color:red;text-align:center;"></p>
</div>

<footer id="bank-details">
    <h3>Donation Details</h3>

    <div class="bank-details">
        <p><strong>Account Name:</strong> Adhira Trust</p>
        <p><strong>SB Account No:</strong> 3912500100787601</p>
        <p><strong>IFSC:</strong> KARB0000391</p>
        <p><strong>Branch:</strong> Kumbakonam</p>
        <p><strong>MICR:</strong> 612052002</p>
    </div>

    <p style="margin-top:20px;">
        Donations are eligible for tax exemption under Section 80G.
    </p>

    <p>
        Thank you for standing with Adhira Trust in spiritual sevas and acts of charity.
    </p>
</footer>

<script>

const scriptURL = "https://script.google.com/macros/s/AKfycbzeZlTH3V7DroZtX83oEmvvXytG1M5vVVxzhRr-lG5XpDtoSjdiDMgA_YelMF3qAZkm/exec";

function login(){

    const username = document.getElementById("username").value;
    const password = document.getElementById("password").value;

    fetch(scriptURL, {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({
            action: "login",   // ðŸ”¥ THIS WAS MISSING
            username: username,
            password: password
        })
    })
    .then(res => res.json())
    .then(data => {
        if(data.status === "success"){
            localStorage.setItem("adminLoggedIn", "true");
            window.location.href = "AdminReports.html";
        } else {
            document.getElementById("errorMsg").innerText = "Invalid Login";
        }
    })
    .catch(error => {
        document.getElementById("errorMsg").innerText = "Server Error";
        console.error(error);
    });
}

</script>
    
<script src="js/script.js"></script>
</body>
</html>
